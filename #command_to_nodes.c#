#include "shell.h"
argument_t *command_to_nodes(argument_t **head, char *buffer, int oper, int num)
{
	char *command = NULL;
	argument_t *aux;
	int i, j, k, total;
	
	total = _strlen_recursion(buffer);
	printf("Number of executions: %d", num);
	for (i = 0, j = 0; i < total; i++)
	{
		if (is_opera(buffer[i]) == 1)
		{
			k = i - 1;
			command = _strndup(buffer + j, k);
			aux = add_command(head, command);
			if (aux == NULL)
			{
				free_arguments(*head);
				exit (EXIT_FAILURE);
			}
			free(command);
			j = i;
			if (oper % 2 == 0)
				k = 2;
			else
				k = 1;
			command = _strndup(buffer + j, k);
			aux = add_command(head, command);
			if (aux == NULL)
			{
				free_arguments(*head);
				exit (EXIT_FAILURE);

			}
			free(command);
			if (oper % 2 == 0)
				j = i + 2;
			else
				j = i + 1;
			k = total - j;
			command = _strndup(buffer + j, k);
			aux = add_command(head, command);
			if (aux == NULL)
			{
		     
			free(command);
			break;
		}
	}
	return (*head);
}
